name = "chart-generation-worker"
main = "index.js"
compatibility_date = "2024-01-01"

# Environment variables
[vars]
ENVIRONMENT = "development"

# KV Namespaces
[[kv_namespaces]]
binding = "TIMESERIES_KV"
id = "your-timeseries-kv-namespace-id"
preview_id = "your-preview-timeseries-kv-namespace-id"

[[kv_namespaces]]
binding = "CHARTS_KV"
id = "your-charts-kv-namespace-id"
preview_id = "your-preview-charts-kv-namespace-id"

# R2 Buckets
[[r2_buckets]]
binding = "CHARTS_BUCKET"
bucket_name = "chart-generation-bucket"

# Secrets (set via wrangler secret put)
# CHART_API_KEY - API key for authentication
# EXTERNAL_CHART_API_KEY - API key for external chart services

[build]
command = ""

[env.production]
name = "chart-generation-worker-prod"
vars = { ENVIRONMENT = "production" }

[[env.production.kv_namespaces]]
binding = "TIMESERIES_KV"
id = "your-prod-timeseries-kv-namespace-id"

[[env.production.kv_namespaces]]
binding = "CHARTS_KV"
id = "your-prod-charts-kv-namespace-id"

[[env.production.r2_buckets]]
binding = "CHARTS_BUCKET"
bucket_name = "chart-generation-bucket-prod"